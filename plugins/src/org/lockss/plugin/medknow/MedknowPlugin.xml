<map>
  <entry>
    <string>plugin_status</string>
    <string>testing</string>
  </entry>
  <entry>
    <string>plugin_identifier</string>
    <string>org.lockss.plugin.medknow.MedknowPlugin</string>
  </entry>
  <entry>
    <string>plugin_name</string>
    <string>Medknow Publications Plugin</string>
  </entry>
  <entry>
    <string>plugin_version</string>
    <string>35</string>
  </entry>
  <entry>
    <string>au_name</string>
    <string>"Medknow Publications, Base URL %s, Issn %s, Year %d, Volume %s", base_url, journal_issn, year, volume_name</string>
  </entry>
  <entry>
    <string>plugin_feature_version_map</string>
    <map>
      <entry>
        <string>Metadata</string>
        <string>3</string>
      </entry>
      <entry>
        <string>Poll</string>
        <string>8</string>
      </entry>
      <entry>
        <string>Substance</string>
        <string>5</string>
      </entry>
    </map>
  </entry>
  <entry>
  <!-- NO:
     base_url/(Browse.asp|showstats.asp)?arguments_go_here
     base_url/article.asp?article-arguments-go-here;type=(3|4|5)  epub or mobile version
     base_url/articlecited.asp?article-arguments-go-here;aid=jpgm_2013_59_3_179_118034 cited by listing
     YES:
     NOTE - volumes can straddle years; don't rely on year parameter anymore
     base_url/showBackIssue.asp?issn=0022-3859;year=2013;volume=59;issue=4;month=October-December  
     base_url/citation.asp?issn=0022-3859;year=2013;volume=59;issue=3;spage=179;epage=185;aulast=Singh landing for refs
     base_url/article.asp?issn=0022-3859;year=2013;volume=59;issue=3;spage=186;epage=189;aulast=Kumar;type=0
        allow "type=0" (abstract) "type=2" (pdf) and no type argument (full-text html; equiv to "type=1")
        pdf redirects to
     base_url/downloadpdf.asp?....args....
     base_url/citeman.asp?issn=0022-3859;year=2013;volume=59;issue=3;spage=179;epage=185;aulast=Singh;t=2 citation
     at=2 is ref_mgr (ris)
     base_url/viewimage.asp?img=jpgm_2013_59_3_179_118034_f4.jpg image/table
     base_url/articles/2013/59/3/images/jpgm_2013_59_3_179_118034_f4.jpg article image/table allowed by first rule for images
     -->
    <string>au_crawlrules</string>
    <list>
      <string>1,"^https?://%s/[^?]*\.(bmp|css|eot|gif|ico|jpe?g|js|png|svg|tif?f|ttf|woff)$", base_url_host</string>
      <string>2,"^%sarticle.asp\?issn=%s;year=[0-9]+;volume=%s;issue=.*;type=[3-9]$",base_url, journal_issn, volume_name</string>
      <string>1,"^%s(article|citation|downloadpdf)\.asp\?issn=%s;year=[0-9]+;volume=%s;issue=",base_url, journal_issn, volume_name</string>
      <!--  allow this for UrlConsumer -->
      <string>1,"^%sshowcaptcha\.asp\?RedirectUrl=",base_url</string>
      <string>1,"^%sciteman.asp\?issn=%s;year=[0-9]+;volume=%s;issue=.*;t=2$",base_url, journal_issn, volume_name</string>
      <string>1,"^%s(show[Bb]ack[Ii]ssue|citation)\.asp\?issn=%s;year=[0-9]+;volume=%s", base_url, journal_issn, volume_name</string>
      <string>1,"^%sviewimage.asp\?img=", base_url</string>
      <string>1,"^%sbrowse.asp(|\?sabs=[ny]|\?date=[0-9]{1,2}-%d)$", base_url, year</string>
    </list>
  </entry>
  <entry>
    <string>au_start_url</string>
    <!-- http://www.jpgmonline.com/backissues.asp -->
    <string>"%sbackissues.asp", base_url</string> <!--  limit to current volume through crawl rules above -->
  </entry>
  <entry>
    <string>au_permission_url</string>
    <string>"%slockss.txt", base_url</string>
  </entry>
  <entry>
    <string>au_feature_urls</string>
    <map>
      <entry>
        <string>au_title</string>
        <string>"%s", base_url</string>
      </entry>
      <entry>
        <string>au_issue</string>
        <string>"%sshowBackIssue.asp?issn=%s;year=%d;volume=%s;issue=%s", base_url, journal_issn, year, volume_name, issue</string>
      </entry>
    </map>
  </entry>
  <entry>
    <string>au_substance_url_pattern</string>
      <list>
      <!-- EITHER
      base_url/article.asp?issn=0022-3859;year=2013;volume=59;issue=3;spage=179;epage=185;aulast=Singh full text html (no type)
      or
      base_url/article.asp?issn=0022-3859;year=2013;volume=59;issue=3;spage=179;epage=185;aulast=Singh;type=2  pdf
      -->
        <string>"^%s(article)\.asp\?issn=%s;year=[0-9]+;volume=%s.*;aulast=[^;]*(;type=2)?$", base_url, journal_issn, volume_name</string>
      </list>
  </entry>
  <entry>
    <string>plugin_config_props</string>
    <list>
      <org.lockss.daemon.ConfigParamDescr>
        <key>year</key>
        <displayName>Year</displayName>
        <description>Four digit year (e.g., 2004)</description>
        <type>4</type>
        <size>4</size>
        <definitional>true</definitional>
        <defaultOnly>false</defaultOnly>
      </org.lockss.daemon.ConfigParamDescr>
      <org.lockss.daemon.ConfigParamDescr>
        <key>base_url</key>
        <displayName>Base URL</displayName>
        <description>Usually of the form http://&lt;journal-name&gt;.com/</description>
        <type>3</type>
        <size>40</size>
        <definitional>true</definitional>
        <defaultOnly>false</defaultOnly>
      </org.lockss.daemon.ConfigParamDescr>
      <org.lockss.daemon.ConfigParamDescr>
        <key>journal_issn</key>
        <displayName>ISSN</displayName>
        <type>1</type>
        <size>12</size>
        <definitional>true</definitional>
        <defaultOnly>false</defaultOnly>
      </org.lockss.daemon.ConfigParamDescr>
      <org.lockss.daemon.ConfigParamDescr>
        <key>volume_name</key>
        <displayName>Volume Name</displayName>
        <type>1</type>
        <size>20</size>
        <definitional>true</definitional>
        <defaultOnly>false</defaultOnly>
      </org.lockss.daemon.ConfigParamDescr>
     </list>
  </entry>
  <entry>
    <string>text/html_filter_factory</string>
    <string>org.lockss.plugin.medknow.MedknowHtmlHashFilterFactory</string>
  </entry>
  <entry>
    <string>application/pdf_filter_factory</string>
    <string>org.lockss.plugin.medknow.MedknowPdfFilterFactory</string>
  </entry>
  <entry>
    <string>au_url_normalizer</string>
    <string>org.lockss.plugin.medknow.MedknowUrlNormalizer</string>
  </entry>
  <entry>
    <string>plugin_article_iterator_factory</string>
    <string>org.lockss.plugin.medknow.MedknowArticleIteratorFactory</string>
  </entry>
  <entry>
    <string>plugin_article_metadata_extractor_factory</string>
    <string>org.lockss.plugin.medknow.MedknowArticleIteratorFactory</string>
  </entry>
  <!-- Since some of their RIS files are incomplete or incorrect, extract metadate from html instead of ris-->
  <!--  RIS files can be "text/plain" -->
  <!--
  <entry>
    <string>text/plain_metadata_extractor_factory_map</string>
    <map>
      <entry>
        <string>*</string>
        <string>org.lockss.plugin.medknow.MedknowRisMetadataExtractorFactory</string>
      </entry>
    </map>
  </entry>
  -->
  <!--  but also could be the correct RIS type -->
  <!--
  <entry>
    <string>application/x-research-info-systems_metadata_extractor_factory_map</string>
    <map>
      <entry>
        <string>*</string>
        <string>org.lockss.plugin.medknow.MedknowRisMetadataExtractorFactory</string>
      </entry>
    </map>
  </entry>
  -->
  <entry>
    <string>text/html_metadata_extractor_factory_map</string>
    <map>
      <entry>
        <string>*</string>
        <string>org.lockss.plugin.medknow.MedknowHtmlMetadataExtractorFactory</string>
      </entry>
    </map>
  </entry>
  <entry>
    <string>au_redirect_to_login_url_pattern</string>
          <string>"%ssubscriberlogin\.asp", base_url</string>-->
  </entry>
  <entry>
    <string>plugin_url_consumer_factory</string>
    <string>org.lockss.plugin.medknow.MedknowUrlConsumerFactory</string>
  </entry>
  <!--
  http://www.wjcs.us.com/article.asp?issn=1941-8213;year=2018;volume=7;issue=1;spage=1;epage=7;aulast=Stringfield;type=2
  http://www.wjtcm.net/article.asp?issn=2311-8571;year=2018;volume=4;issue=4;spage=135;epage=136;aulast=Li;type=2
  http://www.wjtcm.net/article.asp?issn=2311-8571;year=2018;volume=4;issue=2;spage=62;epage=68;aulast=Liang;type=2
  http://www.e-urol-sci.com/article.asp?issn=1879-5226;year=2018;volume=29;issue=6;spage=265;epage=265;aulast=Yang;type=2 Found a login page for pdf
  http://www.tnoajosr.com/article.asp?issn=2589-4528;year=2018;volume=56;issue=4;spage=213;epage=214;aulast=Vadivelu;type=2
  All these links will redirected to PDF download link, they are not login page
-->
  <!--
  <entry>
    <string>au_login_page_checker</string>
    <string>org.lockss.plugin.medknow.MedknowLoginPageChecker</string>
  </entry>
  -->
  <entry>
    <string>au_def_pause_time</string>
    <long>3000</long>
  </entry>
  <entry>
    <string>au_def_new_content_crawl</string>
    <long>1209600000</long>
  </entry>
  <entry>
    <!-- manifest to issue -->
    <string>au_refetch_depth</string>
    <int>2</int>
  </entry>
  <entry>
    <string>plugin_cache_result_list</string>
    <list>
      <string>502=org.lockss.plugin.medknow.MedknowHttpResponseHandler</string>
      <string>503=org.lockss.plugin.medknow.MedknowHttpResponseHandler</string>
      <!-- Invalid content-type file. Captures cases like html returned instead of PDF 
        Make no store/no_fail due to html returned for PDF
        we will count on polls to catch errors where no content was stored -->
      <string>org.lockss.plugin.ContentValidationException$WrongLength=org.lockss.plugin.medknow.MedknowHttpResponseHandler</string>
      <string>org.lockss.plugin.ContentValidationException=org.lockss.plugin.medknow.MedknowHttpResponseHandler</string>
      <!-- SSL Handshake -->
      <string>javax.net.ssl.SSLHandshakeException=org.lockss.plugin.medknow.MedknowHttpResponseHandler</string>
    </list>
  </entry>
  <entry>
    <string>au_repair_from_peer_if_missing_url_pattern</string>
    <list>
      <string>"%s(images|templates)/.+[.](css|js|gif|jpe?g|png)$", base_url</string>
      <string>"%s(js)/.+[.](js)$", base_url</string>
      <string>"%sdownloadpdf[.]asp", base_url</string>
    </list>
  </entry>
  <entry>
    <!-- these will not count towards poll results but will replicate from peer if above -->
    <string>au_url_poll_result_weight</string>
    <list>
      <string>"%s(images|templates)/.+[.](css|js|gif|jpe?g|png)$", base_url, 0</string>
      <string>"%s(js)/.+[.](js)$", base_url, 0</string>
      <string>"%sdownloadpdf[.]asp", base_url, 0</string>
      <!-- always a backissues.asp, however it is always being updated so disagreements happen -->
      <string>"%s(backissues[.]asp)$", base_url, 0</string>
      <!-- allow showcaptcha.asp?RedirectUrl= for UrlConsumer, however no weight -->
      <string>"%sshowcaptcha\.asp\?RedirectUrl=", base_url, 0</string>
    </list>
  </entry>
  <entry>
    <string>au_url_mime_validation_map</string>
    <list>
      <string>;type=2$, application/pdf</string>
      <string>;type=0$, text/html</string>
      <string>;t=2$, application/x-Research-Info-Systems</string>
    </list>
  </entry>
  <entry>
    <!-- Validator factory for text MIME types -->
    <string>text/*_content_validator_factory</string>
    <string>org.lockss.plugin.medknow.MedknowContentValidatorFactory</string>
  </entry>
</map>